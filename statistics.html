
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Statistics &#8212; Getting started with Dfs files in Python using MIKE IO</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Final assignment" href="exercises/final_assignment.html" />
    <link rel="prev" title="Exercise: Dfsu 2D" href="exercises/exercise_dfsu.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Getting started with Dfs files in Python using MIKE IO</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Getting started with Dfs files in Python using MIKE IO
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python for data analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installing Python
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="basic.html">
   Basic Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_A_basic_python.html">
     Exercise A: basic python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="numpy.html">
   NumPy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_B_NumPy.html">
     Exercise B: NumPy
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="matplotlib.html">
   Matplotlib
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_C_matplotlib.html">
     Exercise C: Matplotlib
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="pandas.html">
   Pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_D_pandas_basics.html">
     Exercise D: Pandas basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_E_pandas_timeseries.html">
     Exercise E: Pandas timeseries
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MIKE IO
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="installation_mikeio.html">
   Installing MIKE IO
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="datastructures.html">
   Data Structures
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="dfs0.html">
   Dfs0
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_F_Dfs0.html">
     Exercise F: Dfs0
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="generic.html">
   Generic dfs processing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_H_generic_dfs.html">
     Exercise H: Generic dfs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dfs1.html">
   Dfs1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dfs2.html">
   Dfs2
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="netcdf.html">
   NetCDF to dfs2
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_xarray.html">
     Exercise: NetCDF and xarray
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="mesh.html">
   Mesh
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_mesh.html">
     Exercise: Mesh
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="dfsu2d.html">
   Dfsu 2D
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises/exercise_dfsu.html">
     Exercise: Dfsu 2D
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Statistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exercises/final_assignment.html">
   Final assignment
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="appendix/datetime_timedelta.html">
   Datetimes and timedeltas
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/DHI/getting-started-with-mikeio/main?urlpath=lab/tree/mini_book/statistics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/DHI/getting-started-with-mikeio/blob/main/mini_book/statistics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/statistics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataset-dataarray">
   Dataset / DataArray
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#temporal-aggregations-mean">
     Temporal aggregations: mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spatial-aggregations">
     Spatial aggregations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quantiles-to-file">
     Quantiles to file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#total">
     Total
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generic">
   Generic
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom">
   Custom
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-aggregate">
     Dataset.aggregate
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exceedance-probability">
     Exceedance probability
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Statistics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataset-dataarray">
   Dataset / DataArray
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#temporal-aggregations-mean">
     Temporal aggregations: mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spatial-aggregations">
     Spatial aggregations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quantiles-to-file">
     Quantiles to file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#total">
     Total
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generic">
   Generic
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom">
   Custom
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-aggregate">
     Dataset.aggregate
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exceedance-probability">
     Exceedance probability
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="statistics">
<h1>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">#</a></h1>
<p>After running your MIKE simulation, you would often want to make different kinds of summary statistics of your data - both for your own understanding and for communicating your results.</p>
<p>Examples of statistics</p>
<ul class="simple">
<li><p>Min, max, mean, standard deviation</p></li>
<li><p>Quantiles/percentiles (e.g. median, interquartile range, return period etc)</p></li>
<li><p>Probability/frequency of exceedance</p></li>
</ul>
<p>Types of aggregations</p>
<ul class="simple">
<li><p>Total - aggregate all data to a single number</p></li>
<li><p>Temporal - aggregate all time steps; for a dfsu 2d, the result would be a map</p></li>
<li><p>Spatial - aggregate all elements to a single value per time step</p></li>
<li><p>Others: monthly, by layer, spatial bin, sub domain etc…</p></li>
</ul>
<p>Ways of calculating</p>
<ul class="simple">
<li><p><a class="reference external" href="https://dhi.github.io/mikeio/dataset.html#methods">mikeio.Dataset</a> (or <a class="reference external" href="https://dhi.github.io/mikeio/dataarray.html#methods">mikeio.DataArray</a>)</p></li>
<li><p><a class="reference external" href="https://dhi.github.io/mikeio/generic.html">mikeio.generic</a> (temporal aggregations only; larger-than-memory)</p></li>
<li><p>custom code (typically with NumPy)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import mikeio
import mikeio.generic as generic
</pre></div>
</div>
</div>
</div>
<section id="dataset-dataarray">
<h2>Dataset / DataArray<a class="headerlink" href="#dataset-dataarray" title="Permalink to this headline">#</a></h2>
<p>For smaller dfs files (maybe up to 2GB) it can be convenient to read the data to memory before doing aggregations. The MIKEIO.Dataset class have several <a class="reference external" href="https://dhi.github.io/mikeio/dataset.html#methods">methods</a> for aggregating data along an axis. See the generic section below for larger-than-memory data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds = mikeio.read(&quot;data/NorthSea_HD_and_windspeed.dfsu&quot;)
ds
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mikeio.Dataset&gt;
dims: (time:67, element:958)
time: 2017-10-27 00:00:00 - 2017-10-29 18:00:00 (67 records)
geometry: Dfsu2D (958 elements, 570 nodes)
items:
  0:  Surface elevation &lt;Surface Elevation&gt; (meter)
  1:  Wind speed &lt;Wind speed&gt; (meter per sec)
</pre></div>
</div>
</div>
</div>
<section id="temporal-aggregations-mean">
<h3>Temporal aggregations: mean<a class="headerlink" href="#temporal-aggregations-mean" title="Permalink to this headline">#</a></h3>
<p>The default is to aggregate along the time axis - the output will therefore be a map.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>dsm  = ds.mean()
mean_ws = dsm[&quot;Wind speed&quot;]
mean_ws.shape
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(958,)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>mean_ws.plot(title=&quot;Mean wind speed&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_7_0.png" src="_images/statistics_7_0.png" />
</div>
</div>
</section>
<section id="spatial-aggregations">
<h3>Spatial aggregations<a class="headerlink" href="#spatial-aggregations" title="Permalink to this headline">#</a></h3>
<p>The Dataset aggregation methods (e.g. mean) takes an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument. If we give it the spatial axis (or the string ‘space’), it will produce a time series of spatially aggregated values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s important to note that the spatial aggregations here ignores element areas! Only average takes a weights argument.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.mean(axis=&quot;space&quot;).plot();
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_9_0.png" src="_images/statistics_9_0.png" />
</div>
</div>
<p>Dataset/DataArray has other methods for calculating typical statistics, e.g. max, quantile…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.Wind_speed.max(axis=&quot;space&quot;).plot(title=&quot;Max wind speed&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_11_0.png" src="_images/statistics_11_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.Wind_speed.quantile(q=[0.1,0.5,0.9],axis=&quot;space&quot;).plot();
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_12_0.png" src="_images/statistics_12_0.png" />
</div>
</div>
<p>It’s important to know that the element area is not taking into account when doing the spatial aggregations! Only Dataset.average supports weighted averages.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>df = ds[[&quot;Wind speed&quot;]].mean(axis=&quot;space&quot;).to_dataframe().rename(columns={&quot;Wind speed&quot;:&quot;Simple mean&quot;})

area=ds.geometry.get_element_area()
df[&#39;Weighted&#39;] = ds[[&quot;Wind speed&quot;]].average(axis=&quot;space&quot;, weights=area).to_dataframe()

df.plot(title=&quot;Mean wind speed (simple vs weighted by element area)&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_14_0.png" src="_images/statistics_14_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mikeio.Dataset&gt;
dims: (time:67, element:958)
time: 2017-10-27 00:00:00 - 2017-10-29 18:00:00 (67 records)
geometry: Dfsu2D (958 elements, 570 nodes)
items:
  0:  Surface elevation &lt;Surface Elevation&gt; (meter)
  1:  Wind speed &lt;Wind speed&gt; (meter per sec)
</pre></div>
</div>
</div>
</div>
<p><strong>Inline exercise</strong></p>
<ol class="simple">
<li><p>Create a new DataArray with the temporal mean of the Surface elevation <span class="math notranslate nohighlight">\(\eta\)</span></p></li>
<li><p>Create a new DataArray with the Surface elevation anomaly, <span class="math notranslate nohighlight">\( \eta - \overline{\eta} \)</span></p></li>
<li><p>Plot the last time step of the anomaly</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># insert your code here
</pre></div>
</div>
</div>
</div>
</section>
<section id="quantiles-to-file">
<h3>Quantiles to file<a class="headerlink" href="#quantiles-to-file" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>dsq  = ds.quantile(q=[0.1,0.5,0.9])
dsq
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mikeio.Dataset&gt;
dims: (element:958)
time: 2017-10-27 00:00:00 (time-invariant)
geometry: Dfsu2D (958 elements, 570 nodes)
items:
  0:  Quantile 0.1, Surface elevation &lt;Surface Elevation&gt; (meter)
  1:  Quantile 0.5, Surface elevation &lt;Surface Elevation&gt; (meter)
  2:  Quantile 0.9, Surface elevation &lt;Surface Elevation&gt; (meter)
  3:  Quantile 0.1, Wind speed &lt;Wind speed&gt; (meter per sec)
  4:  Quantile 0.5, Wind speed &lt;Wind speed&gt; (meter per sec)
  5:  Quantile 0.9, Wind speed &lt;Wind speed&gt; (meter per sec)
</pre></div>
</div>
</div>
</div>
<p>Write to a new dfsu file</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>dsq.to_dfs(&quot;NorthSea_Quantiles.dfsu&quot;)
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="_images/mikezero_quantiles.png" /></p>
</section>
<section id="total">
<h3>Total<a class="headerlink" href="#total" title="Permalink to this headline">#</a></h3>
<p>Aggregating over all data (both time and space) can be done from the Dataset in a few ways:</p>
<ul class="simple">
<li><p>ds.describe() - will give you summary statistics like pandas df.describe()</p></li>
<li><p>using axis=None in ds.mean(), ds.min()</p></li>
<li><p>using standard NumPy aggregation functions on the Dataset data e.g. ds[“Wind speed”].mean()</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.describe()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Surface elevation</th>
      <th>Wind speed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>64186.000000</td>
      <td>64186.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.449857</td>
      <td>12.772705</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.651157</td>
      <td>3.694293</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-2.347003</td>
      <td>1.190171</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.057831</td>
      <td>10.376003</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.466257</td>
      <td>12.653086</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.849586</td>
      <td>14.885848</td>
    </tr>
    <tr>
      <th>max</th>
      <td>3.756879</td>
      <td>26.213045</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.min(axis=None).to_dataframe()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Surface elevation</th>
      <th>Wind speed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017-10-27</th>
      <td>-2.347003</td>
      <td>1.190171</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds[&quot;Wind speed&quot;].values.min()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.1901706
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="generic">
<h2>Generic<a class="headerlink" href="#generic" title="Permalink to this headline">#</a></h2>
<p>The <a class="reference external" href="https://dhi.github.io/mikeio/generic.html">MIKEIO.generic</a> submodule can produce common <strong>temporal</strong> statistics on any dfs file (of any size). The output will be a new dfs file. Currently, generic has these methods for calculating statistics:</p>
<ul class="simple">
<li><p>avg_time()</p></li>
<li><p>quantile()</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>generic.avg_time(&quot;data/NorthSea_HD_and_windspeed.dfsu&quot;, &quot;NorthSea_avg.dfsu&quot;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds = mikeio.read(&quot;NorthSea_avg.dfsu&quot;, items=&quot;Wind speed&quot;)
ds
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mikeio.Dataset&gt;
dims: (time:1, element:958)
time: 2017-10-27 00:00:00 (time-invariant)
geometry: Dfsu2D (958 elements, 570 nodes)
items:
  0:  Wind speed &lt;Wind speed&gt; (meter per sec)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds[&quot;Wind speed&quot;].plot(title=&quot;Mean wind speed&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_30_0.png" src="_images/statistics_30_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>generic.quantile(&quot;data/NorthSea_HD_and_windspeed.dfsu&quot;, &quot;NorthSea_Quantiles2.dfsu&quot;, q=[0.1, 0.5, 0.9])
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="_images/mikezero_quantiles.png" /></p>
</section>
<section id="custom">
<h2>Custom<a class="headerlink" href="#custom" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds = mikeio.read(&quot;data/NorthSea_HD_and_windspeed.dfsu&quot;)
</pre></div>
</div>
</div>
</div>
<section id="dataset-aggregate">
<h3>Dataset.aggregate<a class="headerlink" href="#dataset-aggregate" title="Permalink to this headline">#</a></h3>
<p>With aggregate we can get Dataset statistics with our “own” function, e.g. standard deviation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import numpy as np
dsa = ds.aggregate(func=np.std)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>dsa[&quot;Wind speed&quot;].plot(label=&quot;Std [m/s]&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_37_0.png" src="_images/statistics_37_0.png" />
</div>
</div>
</section>
<section id="exceedance-probability">
<h3>Exceedance probability<a class="headerlink" href="#exceedance-probability" title="Permalink to this headline">#</a></h3>
<p>Let’s find out how often the wind exceeds 12m/s in our simulation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import matplotlib.pyplot as plt
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>nt = ds.n_timesteps
one_to_zero = 1. - np.arange(1., nt + 1.)/nt
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>val = ds[&quot;Wind speed&quot;].isel(element=0).values
plt.plot(ds.time, val);
plt.plot(ds.time[val&gt;12], val[val&gt;12],&#39;.r&#39;);
plt.axhline(y=12,color=&#39;r&#39;)
plt.ylabel(&#39;Wind speed [m/s]&#39;)
plt.title(&#39;How often is the wind speed above 12m/s (element 0)?&#39;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_41_0.png" src="_images/statistics_41_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>plt.plot(np.sort(val), one_to_zero);
plt.xlabel(&#39;Wind speed [m/s]&#39;)
plt.ylabel(&#39;Probability of exceedance [-]&#39;)
plt.axvline(x=12,color=&#39;r&#39;)
plt.title(&#39;Wind speed exceedance in element 0&#39;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_42_0.png" src="_images/statistics_42_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Create empty DataArray 
item=mikeio.ItemInfo(mikeio.EUMType.Probability)
data = np.full(shape=(1,ds.geometry.n_elements), fill_value=np.nan)
dae = mikeio.DataArray(data=data, time=&quot;2017-10-27&quot;, item=item, geometry=ds.geometry)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>threshold = 12
for j in range(ds.n_elements):
    # this is a naive and slow way of calculating this!
    dat = ds[&quot;Wind speed&quot;][:,j].values
    dae[0,j] = np.interp(threshold, np.sort(dat), one_to_zero)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>dae100 = dae*100
dae100.plot(title=&quot;Wind speed exceeding 12 m/s&quot;, 
    label=&quot;Time of Exceedance [%]&quot;, cmap=&quot;YlOrRd&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_45_0.png" src="_images/statistics_45_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>total_hours = (ds.time[-1]-ds.time[0]).total_seconds()/3600
dae_hours = dae*total_hours
dae_hours.plot(title=&quot;Wind speed exceeding 12 m/s&quot;, 
    label=&quot;Exceedance [Hours]&quot;, cmap=&quot;YlOrRd&quot;);
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/statistics_46_0.png" src="_images/statistics_46_0.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="exercises/exercise_dfsu.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Exercise: Dfsu 2D</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="exercises/final_assignment.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Final assignment</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Henrik Andersson and Jesper Mariegaard<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>